<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NQA TECH SOFT </title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: {
                        background: "rgba(var(--background), <alpha-value>)",
                        foreground: "rgba(var(--foreground), <alpha-value>)",
                        card: "rgba(var(--card), <alpha-value>)",
                        primary: "rgba(var(--primary), <alpha-value>)",
                        muted: "rgba(var(--muted), <alpha-value>)",
                        border: "rgba(var(--border), <alpha-value>)",
                        shopee: "#ee4d2d", 
                        momo: "#a50064",
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --background: 248, 250, 252;
            --foreground: 15, 23, 42;
            --card: 255, 255, 255;
            --primary: 79, 70, 229;
            --muted: 241, 245, 249;
            --border: 226, 232, 240;
        }

        .dark {
            --background: 2, 6, 23;
            --foreground: 248, 250, 252;
            --card: 15, 23, 42;
            --primary: 99, 102, 241;
            --muted: 30, 41, 59;
            --border: 30, 41, 59;
        }

        body {
            background-color: rgba(var(--background), 1);
            color: rgba(var(--foreground), 1);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Snow Animation */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            overflow: hidden;
            transition: opacity 0.5s ease; /* Fade in effect */
            opacity: 0; /* Hidden by default */
        }

        .snowflake {
            position: absolute;
            top: -10px;
            color: rgba(var(--foreground), 0.3);
            font-size: 1em;
            font-family: Arial;
            text-shadow: 0 0 1px #000;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(105vh); }
        }

        .step-hidden { display: none; }
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .active-version {
            background-color: rgba(var(--primary), 0.1);
            border-color: rgba(var(--primary), 0.6);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col font-sans antialiased selection:bg-primary/30 selection:text-white">

    <!-- Snow Container (Controlled by JS scroll) -->
    <div id="snow-container" class="snow-container"></div>

    <!-- Header -->
    <header class="sticky top-0 z-50 w-full border-b border-border bg-background/80 backdrop-blur-md transition-colors duration-300">
        <div class="container mx-auto max-w-7xl px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3 font-bold text-xl cursor-pointer hover:opacity-80 transition-opacity" onclick="goToStep('selection')">
                <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-indigo-600 flex items-center justify-center shadow-lg shadow-primary/20">
                    <i data-lucide="code-2" class="text-white h-6 w-6"></i>
                </div>
                <span class="hidden sm:inline-block tracking-tight">Visual Studio <span class="text-gray-400 font-normal">Hub</span></span>
            </div>
            
            <div class="flex items-center gap-4">
                <button onclick="toggleTheme()" class="h-9 w-9 rounded-lg border border-border flex items-center justify-center hover:bg-muted hover:text-primary transition-colors">
                    <i data-lucide="sun" class="h-5 w-5 block dark:hidden"></i>
                    <i data-lucide="moon" class="h-5 w-5 hidden dark:block"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="flex-1 w-full relative">
        <!-- Background Gradient -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
            <div class="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-primary/10 rounded-full blur-[100px]"></div>
        </div>
        
        <!-- STEP 1: SELECTION -->
        <div id="step-selection" class="fade-in container mx-auto max-w-7xl px-4 py-12">
            
            <!-- Hero -->
            <!-- <div class="text-center space-y-6 mb-16">
                <span class="inline-flex items-center rounded-full border border-primary/20 bg-primary/10 px-4 py-1.5 text-sm font-medium text-primary shadow-sm animate-float">
                    üöÄ C·∫≠p nh·∫≠t link t·∫£i Community m·ªõi nh·∫•t
                </span>
                <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight leading-tight">
                    T·∫£i Visual Studio <br class="hidden md:block" />
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-500">Ch√≠nh H√£ng Microsoft</span>
                </h1>
                <p class="text-lg text-gray-500 dark:text-gray-400 max-w-2xl mx-auto">
                    T·ªïng h·ª£p link t·∫£i tr·ª±c ti·∫øp (Direct Link) c√°c phi√™n b·∫£n 2026, 2022, 2019, 2017. 
                    ∆Øu ti√™n b·∫£n Community mi·ªÖn ph√≠ cho h·ªçc t·∫≠p v√† nghi√™n c·ª©u.
                </p>
            </div> -->

            <!-- $$$ AFFILIATE SECTION: TECH GEAR $$$ -->
            <div class="mb-20">
                <div class="flex items-center gap-2 mb-6 justify-center md:justify-start">
                    <div class="h-8 w-1 bg-shopee rounded-full"></div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">G√≥c C√¥ng Ngh·ªá üî•</h2>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
                    <!-- Product 1 -->
                    <a href="https://shopee.vn" target="_blank" class="group bg-card border border-border rounded-xl overflow-hidden hover:shadow-xl hover:shadow-shopee/10 transition-all hover:-translate-y-1">
                        <div class="h-40 bg-gray-100 dark:bg-gray-800 flex items-center justify-center relative">
                            <i data-lucide="keyboard" class="h-16 w-16 text-gray-400 group-hover:text-shopee transition-colors"></i>
                            <span class="absolute top-2 right-2 bg-shopee text-white text-[10px] font-bold px-2 py-0.5 rounded">-25%</span>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 truncate">B√†n ph√≠m c∆° Keychron K2 Pro</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-shopee font-bold">1.850.000‚Ç´</span>
                                <span class="text-[10px] text-gray-500 line-through">2.400.000‚Ç´</span>
                            </div>
                        </div>
                    </a>

                    <!-- Product 2 -->
                    <a href="https://shopee.vn" target="_blank" class="group bg-card border border-border rounded-xl overflow-hidden hover:shadow-xl hover:shadow-shopee/10 transition-all hover:-translate-y-1">
                        <div class="h-40 bg-gray-100 dark:bg-gray-800 flex items-center justify-center relative">
                            <i data-lucide="mouse" class="h-16 w-16 text-gray-400 group-hover:text-shopee transition-colors"></i>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 truncate">Chu·ªôt Logitech MX Master 3S</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-shopee font-bold">2.100.000‚Ç´</span>
                                <i data-lucide="shopping-cart" class="h-4 w-4 text-gray-400"></i>
                            </div>
                        </div>
                    </a>

                    <!-- Product 3 -->
                    <a href="https://shopee.vn" target="_blank" class="group bg-card border border-border rounded-xl overflow-hidden hover:shadow-xl hover:shadow-shopee/10 transition-all hover:-translate-y-1">
                        <div class="h-40 bg-gray-100 dark:bg-gray-800 flex items-center justify-center relative">
                            <i data-lucide="monitor" class="h-16 w-16 text-gray-400 group-hover:text-shopee transition-colors"></i>
                            <span class="absolute top-2 right-2 bg-shopee text-white text-[10px] font-bold px-2 py-0.5 rounded">Hot</span>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 truncate">M√†n h√¨nh Dell UltraSharp U2422H</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-shopee font-bold">5.690.000‚Ç´</span>
                                <i data-lucide="shopping-cart" class="h-4 w-4 text-gray-400"></i>
                            </div>
                        </div>
                    </a>

                    <!-- Product 4 -->
                    <a href="https://shopee.vn" target="_blank" class="group bg-card border border-border rounded-xl overflow-hidden hover:shadow-xl hover:shadow-shopee/10 transition-all hover:-translate-y-1">
                        <div class="h-40 bg-gray-100 dark:bg-gray-800 flex items-center justify-center relative">
                            <i data-lucide="headphones" class="h-16 w-16 text-gray-400 group-hover:text-shopee transition-colors"></i>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 truncate">Tai nghe Sony WH-1000XM5</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-shopee font-bold">6.490.000‚Ç´</span>
                                <i data-lucide="shopping-cart" class="h-4 w-4 text-gray-400"></i>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="text-center mt-4">
                    <a href="https://shopee.vn" target="_blank" class="text-xs text-muted-foreground hover:text-shopee hover:underline transition-colors">Xem th√™m thi·∫øt b·ªã c√¥ng ngh·ªá tr√™n Shopee &rarr;</a>
                </div>
            </div>
            <!-- $$$ END AFFILIATE $$$ -->

            <!-- Selection Grid -->
            <div id="selection-grid" class="scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <div class="h-8 w-1 bg-primary rounded-full"></div>
                    <h2 class="text-2xl font-bold">T·∫£i xu·ªëng Visual Studio</h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
                    
                    <!-- Sidebar List -->
                    <div class="md:col-span-4 space-y-3" id="version-list"></div>

                    <!-- Details Card -->
                    <div class="md:col-span-8 rounded-2xl border border-border bg-card/80 backdrop-blur-xl shadow-2xl relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-blue-500"></div>
                        
                        <div class="p-6 md:p-8 space-y-8">
                            <div>
                                <span id="detail-tag" class="inline-flex items-center rounded-lg border border-primary/20 bg-primary/5 px-3 py-1 text-xs font-bold text-primary mb-4">Tag</span>
                                <h2 id="detail-name" class="text-3xl font-bold tracking-tight mb-3">Name</h2>
                                <p id="detail-desc" class="text-gray-500 dark:text-gray-400 text-lg leading-relaxed">Description</p>
                            </div>
                            
                            <hr class="border-border">

                            <div class="space-y-4">
                                <label class="text-sm font-bold uppercase tracking-wider opacity-70">Ch·ªçn phi√™n b·∫£n (Edition)</label>
                                <div class="grid gap-4" id="edition-list"></div>
                            </div>

                            <div class="pt-6 mt-6 bg-muted/30 -mx-6 -mb-6 md:-mx-8 md:-mb-8 px-6 pb-6 md:px-8 md:pb-8 flex flex-col sm:flex-row items-center justify-between gap-6 border-t border-border">
                                <div>
                                    <span class="text-sm text-gray-500 font-medium block">Tr·∫°ng th√°i</span>
                                    <span class="text-2xl font-bold text-green-500">S·∫µn s√†ng</span>
                                </div>
                                <button onclick="proceedToPayment()" id="btn-action" class="w-full sm:w-auto px-8 h-14 rounded-xl bg-primary text-white text-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20 active:scale-95 flex items-center justify-center gap-2">
                                    <i data-lucide="download" class="h-5 w-5"></i> L·∫•y Link T·∫£i
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 2: PAYMENT (Simulated for Paid / Direct for Free) -->
        <div id="step-payment" class="step-hidden fade-in container mx-auto max-w-lg px-4 py-20">
            <button onclick="goToStep('selection')" class="flex items-center text-gray-500 hover:text-white mb-8">
                <i data-lucide="arrow-left" class="mr-2 h-4 w-4"></i> Quay l·∫°i
            </button>
            <div class="rounded-2xl border border-border bg-card shadow-2xl p-8 text-center">
                <h3 class="text-2xl font-bold mb-4">X√°c nh·∫≠n t·∫£i xu·ªëng</h3>
                <p class="text-gray-500 mb-6">B·∫°n ƒëang t·∫£i phi√™n b·∫£n <strong id="pay-name" class="text-primary"></strong>.</p>
                <div class="p-4 bg-muted/50 rounded-lg mb-6 text-sm text-gray-400">
                    ƒê√¢y l√† li√™n k·∫øt tr·ª±c ti·∫øp t·ª´ m√°y ch·ªß Microsoft (aka.ms).
                </div>
                <button onclick="handlePaymentSubmit(event)" id="btn-pay" class="w-full h-12 rounded-xl bg-primary text-white font-bold">Ti·∫øn h√†nh t·∫£i</button>
            </div>
        </div>

        <!-- STEP 3: RESULT -->
        <div id="step-result" class="step-hidden fade-in container mx-auto max-w-2xl px-4 py-20 text-center">
             <div class="inline-flex h-24 w-24 items-center justify-center rounded-full bg-green-500/10 ring-8 ring-green-500/5 mb-8 animate-pulse">
                <i data-lucide="check-circle-2" class="h-12 w-12 text-green-500"></i>
            </div>
             <h2 class="text-3xl font-bold mb-4">ƒê√£ m·ªü li√™n k·∫øt!</h2>
             <p class="text-gray-500 mb-8">Tr√¨nh duy·ªát c·ªßa b·∫°n s·∫Ω t·ª± ƒë·ªông t·∫£i file <strong>.exe</strong> v·ªÅ m√°y.</p>
             
             <div class="bg-card border border-border p-4 rounded-xl mb-8 flex items-center justify-between gap-4 max-w-lg mx-auto">
                 <code id="final-link" class="text-xs text-gray-400 truncate flex-1">...</code>
                 <button onclick="copyLink()" class="p-2 bg-muted hover:bg-primary/10 hover:text-primary rounded-lg transition-colors"><i data-lucide="copy" class="h-4 w-4"></i></button>
             </div>

             <div class="mt-8">
                <button onclick="goToStep('selection')" class="text-sm text-gray-500 hover:text-white underline">Quay l·∫°i trang ch·ªß</button>
             </div>
        </div>

    </main>

    <!-- FOOTER DONATE -->
    <footer class="border-t border-border py-12 bg-muted/20 mt-auto">
        <div class="container mx-auto max-w-7xl px-4 text-center">
            
            <!-- Support Section -->
            <div class="max-w-md mx-auto bg-card border border-border rounded-2xl p-6 mb-10 shadow-sm relative overflow-hidden group hover:border-momo/30 transition-colors">
                <div class="absolute top-0 right-0 w-20 h-20 bg-momo/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"></div>
                <h4 class="font-bold mb-2 flex items-center justify-center gap-2">
                    <i data-lucide="heart" class="text-momo h-5 w-5 fill-momo animate-pulse"></i> Donate
                </h4>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Duy tr√¨ m√°y ch·ªß v√† ph√°t tri·ªÉn c·ªông ƒë·ªìng.</p>
                <div class="flex gap-3 justify-center">
                    <button class="px-5 py-2.5 rounded-xl bg-[#a50064] text-white hover:bg-[#8e0056] transition-colors text-sm font-bold flex items-center gap-2 shadow-lg shadow-momo/20">
                        <i data-lucide="qr-code" class="h-4 w-4"></i> Momo
                    </button>
                    <button class="px-5 py-2.5 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm font-bold flex items-center gap-2 shadow-lg shadow-blue-600/20">
                        <i data-lucide="credit-card" class="h-4 w-4"></i> Banking
                    </button>
                </div>
            </div>

            <p class="text-sm text-gray-500">¬© 2025 Visual Studio Hub. Link t·∫£i t·ª´ Microsoft.</p>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- DATA FROM USER FILE (vs_26_22_19_17_dl.txt) ---
        const VERSIONS = [
            {
                id: 'vs-2026',
                name: 'Visual Studio 2026',
                tag: 'Preview / v18',
                icon: 'code-2',
                description: 'Phi√™n b·∫£n v18 m·ªõi nh·∫•t (Preview) t·ª´ Microsoft.',
                editions: [
                    { id: '2026-com', name: 'Community 2026', type: 'Mi·ªÖn ph√≠', link: 'https://aka.ms/vs/18/Stable/vs_community.exe' },
                    { id: '2026-pro', name: 'Professional 2026', type: 'Tr·∫£ ph√≠', link: 'https://aka.ms/vs/18/Stable/vs_professional.exe' },
                    { id: '2026-ent', name: 'Enterprise 2026', type: 'Doanh nghi·ªáp', link: 'https://aka.ms/vs/18/Stable/vs_enterprise.exe' },
                ]
            },
            {
                id: 'vs-2022',
                name: 'Visual Studio 2022',
                tag: '·ªîn ƒë·ªãnh / v17',
                icon: 'hard-drive',
                description: 'IDE 64-bit ph·ªï bi·∫øn nh·∫•t hi·ªán nay.',
                editions: [
                    { id: '2022-com', name: 'Community 2022', type: 'Mi·ªÖn ph√≠', link: 'https://aka.ms/vs/17/release/vs_community.exe' },
                    { id: '2022-pro', name: 'Professional 2022', type: 'Tr·∫£ ph√≠', link: 'https://aka.ms/vs/17/release/vs_professional.exe' },
                    { id: '2022-ent', name: 'Enterprise 2022', type: 'Doanh nghi·ªáp', link: 'https://aka.ms/vs/17/release/vs_enterprise.exe' },
                ]
            },
            {
                id: 'vs-2019',
                name: 'Visual Studio 2019',
                tag: 'Legacy / v16',
                icon: 'archive',
                description: 'Phi√™n b·∫£n ·ªïn ƒë·ªãnh cho c√°c d·ª± √°n c≈©.',
                editions: [
                    { id: '2019-com', name: 'Community 2019', type: 'Mi·ªÖn ph√≠', link: 'https://aka.ms/vs/16/release/vs_community.exe' },
                    { id: '2019-pro', name: 'Professional 2019', type: 'Tr·∫£ ph√≠', link: 'https://aka.ms/vs/16/release/vs_professional.exe' },
                    { id: '2019-ent', name: 'Enterprise 2019', type: 'Doanh nghi·ªáp', link: 'https://aka.ms/vs/16/release/vs_enterprise.exe' },
                ]
            },
            {
                id: 'vs-2017',
                name: 'Visual Studio 2017',
                tag: 'Legacy / v15',
                icon: 'archive',
                description: 'H·ªó tr·ª£ .NET Core c≈©.',
                editions: [
                    { id: '2017-com', name: 'Community 2017', type: 'Mi·ªÖn ph√≠', link: 'https://aka.ms/vs/15/release/vs_community.exe' },
                    { id: '2017-pro', name: 'Professional 2017', type: 'Tr·∫£ ph√≠', link: 'https://aka.ms/vs/15/release/vs_professional.exe' },
                    { id: '2017-ent', name: 'Enterprise 2017', type: 'Doanh nghi·ªáp', link: 'https://aka.ms/vs/15/release/vs_enterprise.exe' },
                ]
            }
        ];

        let selectedMainVersion = VERSIONS[0];
        let selectedEdition = VERSIONS[0].editions[0];

        // --- THEME TOGGLE ---
        function toggleTheme() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
        }

        // --- SNOWFALL LOGIC ---
        function createSnowflakes() {
            const snowContainer = document.getElementById('snow-container');
            const snowflakesCount = 50; 

            for (let i = 0; i < snowflakesCount; i++) {
                const flake = document.createElement('div');
                flake.classList.add('snowflake');
                flake.innerHTML = '‚ùÑ';
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = Math.random() * 3 + 2 + 's'; 
                flake.style.opacity = Math.random();
                flake.style.fontSize = Math.random() * 10 + 10 + 'px';
                
                snowContainer.appendChild(flake);
            }
        }

        function handleScrollSnow() {
            const snowContainer = document.getElementById('snow-container');
            const scrollY = window.scrollY;
            
            // Show snow gradually as user scrolls down
            if (scrollY > 100) {
                snowContainer.style.opacity = '1';
            } else {
                snowContainer.style.opacity = '0';
            }
        }

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('theme') === 'light') document.documentElement.classList.remove('dark');
            
            renderSidebar();
            renderDetails();
            lucide.createIcons();
            createSnowflakes();
            
            window.addEventListener('scroll', handleScrollSnow);
        });

        // --- RENDER ---
        function renderSidebar() {
            const container = document.getElementById('version-list');
            container.innerHTML = '';
            VERSIONS.forEach(v => {
                const isActive = selectedMainVersion.id === v.id;
                const activeClass = isActive ? 'active-version' : 'bg-card hover:bg-accent/50 border-transparent';
                
                const btn = document.createElement('button');
                btn.className = `w-full flex items-center p-4 rounded-xl text-left border ${activeClass} transition-all mb-3`;
                btn.onclick = () => { selectedMainVersion = v; selectedEdition = v.editions[0]; renderSidebar(); renderDetails(); };
                btn.innerHTML = `
                    <div class="mr-3 h-10 w-10 rounded-lg bg-muted flex items-center justify-center ${isActive ? 'text-primary' : 'text-gray-400'}">
                        <i data-lucide="${v.icon}" class="h-5 w-5"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-sm ${isActive ? 'text-primary' : ''}">${v.name}</h3>
                        <span class="text-xs text-gray-500">${v.tag}</span>
                    </div>
                `;
                container.appendChild(btn);
            });
            lucide.createIcons();
        }

        function renderDetails() {
            document.getElementById('detail-name').innerText = selectedMainVersion.name;
            document.getElementById('detail-tag').innerText = selectedMainVersion.tag;
            document.getElementById('detail-desc').innerText = selectedMainVersion.description;
            
            const list = document.getElementById('edition-list');
            list.innerHTML = '';
            
            selectedMainVersion.editions.forEach(ed => {
                const isActive = selectedEdition.id === ed.id;
                const activeClass = isActive ? 'border-primary bg-primary/5 ring-1 ring-primary/20' : 'border-border bg-card hover:border-primary/30';
                
                const div = document.createElement('div');
                div.className = `flex items-center gap-4 rounded-xl border p-4 cursor-pointer transition-all ${activeClass}`;
                div.onclick = () => { selectedEdition = ed; renderDetails(); };
                div.innerHTML = `
                    <div class="flex-1">
                        <span class="font-bold block">${ed.name}</span>
                        <span class="text-xs text-gray-500">${ed.type}</span>
                    </div>
                    ${isActive ? '<i data-lucide="check-circle" class="h-5 w-5 text-primary"></i>' : '<div class="h-5 w-5 rounded-full border border-gray-300"></div>'}
                `;
                list.appendChild(div);
            });
            lucide.createIcons();
        }

        // --- NAVIGATION ---
        function proceedToPayment() {
            document.getElementById('pay-name').innerText = selectedEdition.name;
            goToStep('payment');
        }

        function handlePaymentSubmit(e) {
            e.preventDefault();
            const btn = document.getElementById('btn-pay');
            btn.innerHTML = `<i data-lucide="loader-2" class="animate-spin h-5 w-5 inline"></i> ƒêang x·ª≠ l√Ω...`;
            lucide.createIcons();
            
            setTimeout(() => {
                btn.innerHTML = "Ti·∫øn h√†nh t·∫£i";
                window.open(selectedEdition.link, '_blank'); // Direct Download
                
                document.getElementById('final-link').innerText = selectedEdition.link;
                goToStep('result');
            }, 1000);
        }

        function copyLink() {
            navigator.clipboard.writeText(selectedEdition.link);
            alert("ƒê√£ sao ch√©p link!");
        }

        function goToStep(step) {
            ['selection', 'payment', 'result'].forEach(s => document.getElementById(`step-${s}`).classList.add('step-hidden'));
            document.getElementById(`step-${step}`).classList.remove('step-hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToGrid() {
            document.getElementById('selection-grid').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
